[
 {
  "align_labels_right": 0, 
  "css": "label {\n    display: inline-block;\n    max-width: 100%;\n    margin-bottom: 0;\n    font-weight: bold;\n}\n.table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {\n\tline-height: 1.4;\n}\n.print-format td, .print-format th {\n    vertical-align: top !important;\n    padding: 2px !important;\n}\n\n.table-bordered {\n\tborder: 1px solid black !important;\n}\n.print-format th {\n\tborder: 1px solid black !important;\n}\n.test-item-table .table-bordered > tbody > tr > td {\n\tborder-top-width: 0 !important;\n\tborder-right-width: 1px;\n\tborder-bottom-width: 0 !important;\n\tborder-left-width: 0 !important;\n\tborder-top-style: solid;\n\tborder-right-style: solid;\n\tborder-bottom-style: solid;\n\tborder-left-style: solid;\n\tborder-top-color: white !important;\n\tborder-right-color: black !important;\n\tborder-bottom-color: white !important;\n\torder-left-color: black !important;\n\tborder-image-source: none;\n\tborder-image-slice: 100%;\n\tborder-image-width: 1;\n\tborder-image-outset: 0;\n\torder-image-repeat: stretch stretch;\n}\nhr {\n\tmargin-top: 0 !important;\n\tmargin-bottom: 0 !important;\n\tmargin-right: 1px !important;\n\tborder: 1px solid black !important; \n\twidth: 80px; \n\ttext-align:right !important;\n}", 
  "custom_format": 1, 
  "disabled": 0, 
  "doc_type": "Customer", 
  "docstatus": 0, 
  "doctype": "Print Format", 
  "font": "Default", 
  "format_data": null, 
  "html": "<script type=\"text/javascript\">\n\tfunction get_balance(index) {\n\t\tvar class_name = \"text_balance_\"+index\n\t\tvar previous_balance = $(\".\"+class_name+\"\").closest(\"tr\").prev().find('td:last').text().replace(/[\u00a3,]+/g,\"\")\n\t\tvar amount = $(\".\"+class_name+\"\").closest(\"tr\").find('td:nth-child(5)').text().replace(/[\u00a3,]+/g,\"\")\n\t\tvar total_balance = parseFloat(amount) + parseFloat(previous_balance.split(' ').join(''))\n\t\tvar opening_balance = total_balance.toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\n\t\tvar nice_balance = \"\u00a3 \" + opening_balance;\n\t\treturn \"\u00a3 \" + opening_balance\n\t}\n</script>\n<div id=\"header-html\">\n\t<div class=\"letter-head\" style=\"margin-top: -20px !important; text-align: center;\">\n\t\t<b>{{ \"STATEMENT\" }}</b>\n\t</div>\n</div>\n<div class=\"row\" style=\"margin-top: -50px !important;\">\n\t<div class=\"col-xs-8 text-left\" style=\"padding-top: 13mm; line-height: 1.3;\">\n\t\t{{ \"Mobile Fun Limited\" }}<br>\n\t\t{{ \"Unit 16, Network Park\" }}<br>\n\t\t{{ \"Duddeston Mill Road\" }}<br>\n\t\t{{ \"Birmingham B8 1AU\" }}<br>\n\t\t{{ \"08442495081\" }}\n\t</div>\n\t{% set address_name = frappe.db.get_value(\"Dynamic Link\", {\"link_name\": doc.customer_name, \"parenttype\": \"Address\"},\"parent\")%}\n\t{% set customer_billing_address = frappe.db.get_value(\"Address\", address_name, [\"city\", \"address_title\", \"pincode\"], as_dict=1)%}\n\t<div class=\"col-xs-4 text-left\" style=\"padding-top: 13mm; line-height: 1.3;\">\n\t\t{{ doc.customer_name }}<br>\n\t\t{% if customer_billing_address %}\n\t\t\t{{ customer_billing_address.address_title }}<br>\n\t\t\t{{ customer_billing_address.city }}<br>\n\t\t\t{{ customer_billing_address.pincode }}<br>\n\t\t{% endif %}\n\t</div>\n</div>\n<div class=\"main-page\" style=\"padding-top: 40mm;\">\n\t<div class=\"row\">\n\t\t<div class=\"col-xs-7\" style=\"margin-top: -18px !important;\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-xs-6\">\n\t\t\t\t\t<table class=\"table table-bordered\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"text-left\">{{ _(\"Date\") }}</th>\n\t\t\t\t\t\t\t\t<td class=\"text-left\" style=\"border: 1px solid black !important;\">\n\t\t\t\t\t\t\t\t\t{{ frappe.utils.formatdate(frappe.utils.today(), 'dd/MM/YYYY') }}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class=\"text-left\">\n\t\t\t\t\t\t\t\t\t{{ _(\"Debtor ID\") }}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<td class=\"text-left\" style=\"border: 1px solid black !important;\">\n\t\t\t\t\t\t\t\t\t{{ doc.debtor_id }}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"col-xs-5\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-xs-9\">\n\t\t\t\t{{ \"Credit Limits:\"}} {{ frappe.utils.fmt_money(doc.credit_limit, None,\"GBP\") }}<br>\n\t\t\t\t{{ \"Payments Terms:\" }} {{ doc.payment_terms }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"test-item-table\" style=\"margin-top: -10px !important;\">\n\t\t<table class=\"table table-bordered\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th style=\"width: 18%;\" class=\"text-left\">\n\t\t\t\t\t\t<label>{{ _(\"Document No.\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th style=\"width: 10%;\" class=\"text-left\">\n\t\t\t\t\t\t<label>{{ _(\"Date\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th style=\"width: 18%;\" class=\"text-right\">\n\t\t\t\t\t\t<label>{{ _(\"Voucher Type\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th style=\"width: 20%;\" class=\"text-right\">\n\t\t\t\t\t\t<label>{{ _(\"Reference\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th style=\"width: 20%;\" class=\"text-right\">\n\t\t\t\t\t\t<label>{{ _(\"Amount\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t\t<th style=\"width: 15%;\" class=\"text-right\">\n\t\t\t\t\t\t<label>{{ _(\"Balance\") }}</label>\n\t\t\t\t\t</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t{% set current_fiscal_year = frappe.db.get_value(\"Global Defaults\",\"Global Defaults\",\"current_fiscal_year\") %}\n\t\t\t{% set year_details = frappe.db.get_value(\"Fiscal Year\", current_fiscal_year, [\"year_start_date\", \"year_end_date\"]) %}\n\t\t\t{% set gl_entries = frappe.get_all(\"GL Entry\", filters={\"docstatus\":(\"<\",2), \"party_type\":\"Customer\", \"party\":doc.name, \"posting_date\":(\"between\",(year_details[0], year_details[1]))}, fields=[\"name\", \"posting_date\", \"account\", \"party_type\", \"party\", \"voucher_type\", \"voucher_no\", \"against_voucher_type\", \"against_voucher\", \"account_currency\", \"sum(debit_in_account_currency) as debit\", \"sum(credit_in_account_currency) as credit\"], group_by=\"voucher_type, voucher_no, against_voucher_type, against_voucher, party\", order_by=\"posting_date, name\") %}\n\t\t\t{% set opening_balance = frappe.get_all(\"GL Entry\", filters={\"docstatus\":(\"<\",2), \"party_type\":\"Customer\", \"party\":doc.name, \"posting_date\":(\"<\",year_details[0] ) }, fields=[\"name\", \"sum(debit_in_account_currency) as debit\", \"sum(credit_in_account_currency) as credit\"]) %}\n\t\t\t{% set total_balance = frappe.get_all(\"GL Entry\", filters={\"docstatus\":(\"<\",2), \"party_type\":\"Customer\", \"party\":doc.name}, fields=[\"sum(debit_in_account_currency) as debit\", \"sum(credit_in_account_currency) as credit\"]) %}\n\t\t\t<tr>\n\t\t\t\t<td></td>\n\t\t\t\t<td>{{ frappe.utils.formatdate(year_details[0], \"dd/MM/Y\") }}</td>\n\t\t\t\t<td>\n\t\t\t\t\t<b>{{ \"Opening Balance\" }}</b>\n\t\t\t\t</td>\n\t\t\t\t<td>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t{% if opening_balance %}\n\t\t\t\t\t\t{% if opening_balance[0].credit %}\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-opening_balance[0].credit, None,\"GBP\") }}\n\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(opening_balance[0].debit, None,\"GBP\") }}\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% else %}\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, None,\"GBP\") }}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</td>\n\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t{% if opening_balance %}\n\t\t\t\t\t\t{% if opening_balance[0].credit %}\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-opening_balance[0].credit, None,\"GBP\") }}\n\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(opening_balance[0].debit, None,\"GBP\") }}\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% else %}\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(0, None,\"GBP\") }}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t\t{% for g in gl_entries %}\n\t\t\t\t<tr>\n\t\t\t\t\t{% if g.voucher_type == \"Sales Invoice\" %}\n\t\t\t\t\t\t{% set si_details = frappe.db.get_value(\"Sales Invoice\", g.voucher_no, [\"status\", \"outstanding_amount\"]) %}\n\t\t\t\t\t\t{% if si_details[0] != \"Paid\" %}\n\t\t\t\t\t\t\t{% if g.voucher_no ==  g.against_voucher %}\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t\t\t\t\t{{ g.voucher_no }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td> \n\t\t\t\t\t\t\t\t\t{{ frappe.utils.formatdate(g.posting_date, \"dd/MM/Y\") }}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<b>{{ g.voucher_type }}</b>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t{% set remarks = frappe.db.get_value(\"Sales Invoice\", g.voucher_no, \"remarks\") %}\n\t\t\t\t\t\t\t\t\t{% if remarks != \"No Remarks\" %}\n\t\t\t\t\t\t\t\t\t\t{{ remarks}}\n\t\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(g.debit, None,\"GBP\") }}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td class=\"text-right text_balance_{{ loop.index0 }}\">\n\t\t\t\t\t\t\t\t\t<script type=\"text/javascript\">\n\t\t\t\t\t\t\t\t\t\t$(\".text_balance_{{ loop.index0 }}\").html(get_balance({{loop.index0}}))\n\t\t\t\t\t\t\t\t\t</script>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% if g.voucher_type == \"Payment Entry\" %}\n\t\t\t\t\t\t{% if not g.against_voucher %}\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t\t\t\t{{ g.voucher_no }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{{ frappe.utils.formatdate(g.posting_date, \"dd/MM/Y\") }}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<b>{{ g.voucher_type }}</b>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t{% set remarks = frappe.db.get_value(\"Payment Entry\", g.voucher_no, \"remarks\") %}\n\t\t\t\t\t\t\t\t{% if remarks %}\n\t\t\t\t\t\t\t\t\t{{ remarks }}\n\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t{% set paid_amount = frappe.db.get_value(\"Payment Entry\", g.voucher_no,\"paid_amount\") %}\n\t\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-paid_amount, None,\"GBP\") }}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"text-right\"> \n\t\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-g.credit, None,\"GBP\") }}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% endif %}\n\t\t\t\t\t{% if g.voucher_type == \"Journal Entry\" %}\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<div class=\"value\">\n\t\t\t\t\t\t\t\t{{ g.voucher_no }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{{ frappe.utils.formatdate(g.posting_date, \"dd/MM/Y\") }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<b>{{ \"Credit Note\" }}</b>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{% set remarks = frappe.db.get_value(\"Journal Entry\", g.voucher_no, \"user_remark\") %}\n\t\t\t\t\t\t\t{% if remarks %}\n\t\t\t\t\t\t\t\t{{ remarks}}\n\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t{% set paid_amount = frappe.db.get_value(\"Journal Entry\", g.voucher_no, \"total_credit\") %}\n\t\t\t\t\t\t{% set party_amount = frappe.db.get_value(\"Journal Entry Account\", {\"parent\": g.voucher_no, \"party\": doc.name}, \"party_balance\") %}\n\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-paid_amount, None,\"GBP\") }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class=\"text-right\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(-paid_amount + party_amount, None,\"GBP\") }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t{% endif %}\n\t\t\t\t</tr>\n\t\t\t{% endfor %}\n\t\t\t</tbody>\n\t\t</table>\n\t\t<table class=\"table\" style=\"margin-top: -20px !important\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<td style=\"width: 20%; border: 0;\"></td>\n\t\t\t\t\t<td style=\"width: 10%; border: 0;\"></td>\n\t\t\t\t\t<td style=\"width: 15%; border: 0;\"></td>\n\t\t\t\t\t<td style=\"width: 22%; border: 0;\"></td>\n\t\t\t\t\t<th class=\"text-right\" style=\"width: 15%; border-top: 0 !important;\"> \t\t{{ \"Amount Due:\" }}\n\t\t\t\t\t</th>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 18%; border: 1px solid black!important; border-top: 0 !important;\">\n\t\t\t\t\t\t\t{{ frappe.utils.fmt_money(total_balance[0].debit - total_balance[0].credit, None,\"GBP\") }}\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t</table>\n\t\t<table class=\"table\">\n\t\t\t<thead>\n\t\t\t\t<tr style=\"border: 1px solid black !important;\">\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 15%;\">\n\t\t\t\t\t\t<b>{{ \"Current\" }}</b>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(doc.current, None,\"GBP\") }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 15%;\">\n\t\t\t\t\t\t<b>{{ \"31-60 Days\" }}</b>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(doc.less_sixty, None,\"GBP\") }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 15%;\">\n\t\t\t\t\t\t<b>{{ \"61-90 Days\" }}</b>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(doc.less_ninety, None,\"GBP\") }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 15%;\">\n\t\t\t\t\t\t<b>{{ \"91 and Over\" }}</b>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t{{ frappe.utils.fmt_money(doc.above_ninety, None,\"GBP\") }}\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 10%;\">\n\t\t\t\t\t\t<br><hr style=\"width: 10px !important;\">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 10%;\">\n\t\t\t\t\t\t<br><hr style=\"width: 10px !important;\">\n\t\t\t\t\t</td>\n\t\t\t\t\t<td class=\"text-right\" style=\"width: 10%;\">\n\t\t\t\t\t\t<br><hr style=\"width: 10px !important;\">\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t</table>\n\t</div>\n\t<div style=\"margin-top: 50px !important\">\n\t\t<label>{{ \"Bank Details\"}}</label>\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-xs-8\">\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-xs-6\">\n\t\t\t\t\t\t<label>{{ \"Bank Name:\" }}</label>\n\t\t\t\t\t\t<label>{{ \"Account Name:\" }}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-xs-6\">\n\t\t\t\t\t\t<label>{{ \"Bank Account No:\" }}</label>\n\t\t\t\t\t\t<label>{{ \"Sort Code:\" }}</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>", 
  "line_breaks": 0, 
  "modified": "2018-02-27 22:14:06.458458", 
  "module": "Mobile Fun Customisation", 
  "name": "Customer Statement", 
  "print_format_builder": 0, 
  "print_format_type": "Server", 
  "show_section_headings": 0, 
  "standard": "No"
 }
]